# Альтернативный гайд по допиливанию Skyrim Legendary Edition

## Содержание
+ [Скачивание/установка игры](#DownloadInstall)
+ [Дополнительные программы](#SkyrimTools)
+ [Подготовка игры](#Preparation)

## <a name="DownloadInstall"></a> Скачивание/установка игры

1) Для начала убедись, что вычистил все следы предыдущей установки (если она была). Проверь папки Стима или куда ты ещё устанавливал Скайрим, проверь "Документы\My Games". Проверь установленные программы через Панель Управления или Reg Organizer или любую подобную софтину, вдруг он висит в списке.

2) Теперь выбор версии игры.
+ Если ставишь пиратку, убедись в её "нормальности". Версия должна быть 1.9.32.0.8, там должно быть 4 DLC (Dawnguard, Hearthfire, Dragonborn и High Resolution Texture Pack) и не должно быть больше ничего. Никаких предустановленных модов, фиксов и подобного. Некоторые аноны рекомендуют репак от "R.G. Механики".
+ Если ставишь Стим-версию, то просто не промахнись с языком (ПКМ ➔ Свойства ➔ Язык)

3) Установка должна проводиться не на диск C. Нужен какой-нибудь D, E или где ты там держишь игрушки. Если ставишь пиратку, подойдёт "E:\Games", если из Стима - "E:\Steam Library". Поверь, это не спроста, на диске C (особенно в Program Files) часто возникают проблемы с правами записи. Для гайда будем счиатать, что ты ставишь Скайрим из Стима.

## <a name="SkyrimTools"></a> Дополнительные программы

1) Первое, что я хотел бы сказать: не рекомендую скачивать эти программы с русских сайтов типа GamerMods, ModGames и подобных. Кто знает, что они там навертели в настройках? Такое бывает довольно часто, васяны любят впаривать людям своевольно настроенный софт.

2) Этот софт можно спокойно качать, пока игра устанавливается, только не запускай. От себя я рекомендую Portable-версии, которые легче запихнуть в любую папку. Так и сделай: создай папку "E:\Games\Skyrim Tools", куда будешь кидать всё для работы с игрой.

3) Собственно, необходимые программы.
+ **Mod Organizer**. Это менеджер модов, который является лучшим решением для допиливания игры. Отличается отлично сделанной виртуализацией, которая позволяет устанавливать моды в отдельные папки, а значит и удалять их без следов. [Ссылка на скачивание (Nexus)](http://www.nexusmods.com/skyrim/mods/1334/?tab=2&navtag=http%3A%2F%2Fwww.nexusmods.com%2Fskyrim%2Fajax%2Fmodfiles%2F%3Fid%3D1334&pUp=1) - выбирай версию 1.3.11 не Installer.
+ **BethINI**. Программа для настройки инишников - файлов конфигурации, весьма полезная вещь. [Ссылка на скачивание (Nexus)](http://www.nexusmods.com/skyrim/mods/69787/?tab=2&navtag=http%3A%2F%2Fwww.nexusmods.com%2Fskyrim%2Fajax%2Fmodfiles%2F%3Fid%3D69787&pUp=1) - выбирай версию 2.5.
+ **LOOT**. Это сортировщик плагинов и не только. Может указать тебе на плагины, в которых есть ошибки - так называемые "грязные записи". [Ссылка на скачивание (Github)](https://github.com/loot/loot/releases/latest) - выбирай версию не Installer.
+ **TES5Edit**. Это программа для простого редактирования плагинов и относительно автоматической очистки их от "грязных записей", которые вам покажет LOOT. [Ссылка на скачивание (Nexus)](http://www.nexusmods.com/skyrim/mods/25859/?tab=2&navtag=http%3A%2F%2Fwww.nexusmods.com%2Fskyrim%2Fajax%2Fmodfiles%2F%3Fid%3D25859&pUp=1) - выбирай версию 3.2.
+ **Wrye Bash**. Ещё один менеджер модов, который потребуется тебе не для управления модами, а для создания Башед-патча. Эта штука делает несколько полезных вещей, в том числе объединяет уровневые листы разных плагинов. [Ссылка на скачивание (Nexus)](http://www.nexusmods.com/skyrim/mods/1840/?tab=2&navtag=http%3A%2F%2Fwww.nexusmods.com%2Fskyrim%2Fajax%2Fmodfiles%2F%3Fid%3D1840&pUp=1) - выбирай версию 307 не Installer.

4) Эти программы должны лежать по своим папкам в "E:\Games\Skyrim Tools". Типа "E:\Games\Skyrim Tools\BethINI", "E:\Games\Skyrim Tools\LOOT" и т.д. И пока Скайрим у тебя не установлен, не запускай их.

## <a name="Preparation"></a> Подготовка игры

1) Запусти Лаунчер игры. Если ты не создал ярлык на Рабочем столе, иди по адресу "E:\Steam Library\steamapps\common\Skyrim" и запусти SkyrimLauncher.exe. Дождись, пока он определит настройки графики для твоего ПК, а затем выйди из него без каких-либо других действий.

2) Теперь по адресу "Документы\My Games" должна оказаться папка Skyrim, а в ней 2 файла: Skyrim.ini и SkyrimPrefs.ini. Если они есть, то пока что всё идёт нормально.

3) Теперь запусти BethINI для настройки этих инишников. Выбери игру Skyrim и иди на вкладку Setup. Проверь, чтобы там были правильно заполнены строки Game, Game Path и INI Path. Далее перейди обратно на вкладку Basic, кликни BethINI Presets и выбери нужный пресет. Затем поставь галки напротив Recommended Tweaks и ENB Mode. По желанию можешь изменить галки справа вверху - там оконный режим, FXAA (сглаживание), работа в фоновом режиме и вертикальная синхронизация. Наконец, кликни Save and Exit.

4) Теперь запусти Mod Organizer, обязательно от имени администратора. Выбери игру Skyrim и реши, ассоциировать ли nxm-ссылки Нексуса с МО. Далее тебе будет нужно пройти небольшую обучалку. Пройди её, просто пройди и запомни. 

5) Теперь ты должен увидеть перед собой примерно такую картину.

![](http://i.imgur.com/s57RUWb.png)

Честно говоря, это никуда не годится. Открой окно управления профилями и скопируй профиль Default, назови новый Main или как-нибудь похоже. По желанию можешь поставить галку Local Savegames.

![](http://i.imgur.com/76Nhs2L.png)

Теперь выбери свой профиль Main и открой редактор INI, встроенный в МО (Tools/INI Editor). Если там есть инишники (копии настроенных нами), то пока что всё идёт нормально.

6) Теперь закрывай МО. Серьёзно, тебе нужо разобраться с ванильными файлами игры. Иди по адресу "E:\Steam Library\steamapps\common\Skyrim\Data". Далее в новом окне иди в папку mods в корне МО. И сделай следующее:
+ создай в папке mods папку Skyrim, кинь в неё файлы Skyrim.esm и Skyrim - [].bsa из Даты.
+ так же папку Update, в неё Update.esm и Update.bsa.
+ Dawnguard - файлы Dawnguard.esm и Dawnguard.bsa.
+ Hearthfire - файлы HearthFires.esm и HearthFires.bsa.
+ Dragonborn - файлы Dragonborn.esm и Dragonborn.bsa.
+ High-Res DLC - файлы HighRes[].esm и HighRes[].bsa.
+ Localization - Textures - папку Textures.
+ Localization - Misc - все остальные папки.

Таким образом, Дата должна остаться полностью пустой. Теперь можешь заглянуть в папку МО "profiles\Default" и удалить оттуда все файлы. Профиль Default использовать не рекомендуется.

7) Снова запусти МО и расставь моды-плагины как следует. А именно вот так.

![](http://i.imgur.com/pslgjne.png)

8) Теперь тебе надо добавить используемые нами программы в список МО. Это нужно для того, чтобы они могли видеть моды, установленные через него. Нажми на 2 шестерёнки слева вверху и добавь LOOT и TES5Edit. Вообще, все программы, которые обращаются к модам в процессе работы, должны запускаться через МО.

9) Запусти LOOT через МО и увидь, что плагины DLC полны "грязными записями".

![](http://i.imgur.com/0vImgFA.png)

10) Чтобы исправить это, сделай следующее:
+ запусти TES5Edit через МО, выбери один Update.esm, дождись конца загрузки (Background Loader: finished).
+ в левой части ПКМ по Update.esm ➔ Apply Filter for Cleaning, дождись окончания операции.
+ снова ПКМ ➔ Remove "Identical to Master" records, подтверди изменения в файле.
+ снова ПКМ ➔ Undelete and Disable References.
+ закрой TES5Edit, сохранив изменённый Update.esm. По желанию можешь сохранить бэкап, поставь галку Backup plugins.
+ повтори эти операции для каждого плагина DLC, а для Dawnguard - 2 раза. Да, 2 раза, такая вот морока.

11) Снова запусти LOOT и убедись, что теперь с плагинами всё в порядке.

![](http://i.imgur.com/SEESmwV.png)

12) Теперь установка и настройка ENBoost. Настоящий маст-хэв, который необходим для разных операций в дальнейшем. Делай так:
+ скачай и установи [DirectX End-User Runtimes](https://www.microsoft.com/en-us/download/details.aspx?id=8109).
+ скачай последнюю версию [ENBSeries](http://enbdev.com/download_mod_tesskyrim.html).
+ в этом архиве открой папку WrapperVersion и возьми оттуда файлы d3d9.dll, enbhost.exe и enblocal.ini. Запихни их в корень игры, где лежит TESV.exe.
+ открой enblocal.ini и поменяй значения: UsePatchSpeedhackWithoutGraphics=true, UseDefferedRendering=false, ExpandSystemMemoryX64=false, AutodetectVideoMemorySize=false.
+ теперь очень важный момент: тебе нужно указать объём видеопамяти, который будет использовать игра. И ещё объём буфера. Это VideoMemorySizeMb и ReservedMemorySizeMb.
++ скачай [VRamSizeTest Tool](http://enbdev.com/download_vramsizetest.htm) и запусти вариант DX9.
